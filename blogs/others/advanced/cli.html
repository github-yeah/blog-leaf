<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>`CLI`ä»å…¥é—¨åˆ°å¼€è½¦ | blog-leaf</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="assets/favicon.png">
    <meta name="description" content="Vue + VuePress + TypeScript + JavaScript + HTML + CSS">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/blog-leaf/assets/css/0.styles.072ebcf4.css" as="style"><link rel="preload" href="/blog-leaf/assets/js/app.ee4ca5d1.js" as="script"><link rel="preload" href="/blog-leaf/assets/js/2.470386f0.js" as="script"><link rel="preload" href="/blog-leaf/assets/js/17.8ac44ecc.js" as="script"><link rel="prefetch" href="/blog-leaf/assets/js/10.dea45dd2.js"><link rel="prefetch" href="/blog-leaf/assets/js/11.5eeb0cb0.js"><link rel="prefetch" href="/blog-leaf/assets/js/12.ee11eaa1.js"><link rel="prefetch" href="/blog-leaf/assets/js/13.79912585.js"><link rel="prefetch" href="/blog-leaf/assets/js/14.b362e383.js"><link rel="prefetch" href="/blog-leaf/assets/js/15.e35ccadc.js"><link rel="prefetch" href="/blog-leaf/assets/js/16.3116fac6.js"><link rel="prefetch" href="/blog-leaf/assets/js/18.b3aebbe6.js"><link rel="prefetch" href="/blog-leaf/assets/js/19.dde742d9.js"><link rel="prefetch" href="/blog-leaf/assets/js/20.56bbd3ce.js"><link rel="prefetch" href="/blog-leaf/assets/js/21.c416f24a.js"><link rel="prefetch" href="/blog-leaf/assets/js/22.0bcefcaf.js"><link rel="prefetch" href="/blog-leaf/assets/js/23.5f65c94b.js"><link rel="prefetch" href="/blog-leaf/assets/js/24.8e3fae48.js"><link rel="prefetch" href="/blog-leaf/assets/js/25.bec7cb65.js"><link rel="prefetch" href="/blog-leaf/assets/js/26.a89afcaf.js"><link rel="prefetch" href="/blog-leaf/assets/js/27.77e987a5.js"><link rel="prefetch" href="/blog-leaf/assets/js/28.f2db43c4.js"><link rel="prefetch" href="/blog-leaf/assets/js/29.2c66c2a6.js"><link rel="prefetch" href="/blog-leaf/assets/js/3.04af8115.js"><link rel="prefetch" href="/blog-leaf/assets/js/30.377a0dd5.js"><link rel="prefetch" href="/blog-leaf/assets/js/31.9d2aeaf8.js"><link rel="prefetch" href="/blog-leaf/assets/js/32.d3382d50.js"><link rel="prefetch" href="/blog-leaf/assets/js/33.9e353d55.js"><link rel="prefetch" href="/blog-leaf/assets/js/4.587ff988.js"><link rel="prefetch" href="/blog-leaf/assets/js/5.d4093b8f.js"><link rel="prefetch" href="/blog-leaf/assets/js/6.05b5ca9c.js"><link rel="prefetch" href="/blog-leaf/assets/js/7.50bb0fd2.js"><link rel="prefetch" href="/blog-leaf/assets/js/8.991da65b.js"><link rel="prefetch" href="/blog-leaf/assets/js/9.05f6314e.js">
    <link rel="stylesheet" href="/blog-leaf/assets/css/0.styles.072ebcf4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-leaf/" class="home-link router-link-active"><img src="assets/favicon.png" alt="blog-leaf" class="logo"> <span class="site-name can-hide">blog-leaf</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-leaf/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Category" class="dropdown-title"><span class="title">Category</span> <span class="arrow down"></span></button> <button type="button" aria-label="Category" class="mobile-dropdown-title"><span class="title">Category</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Archives
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-leaf/blogs/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/blog-leaf/blogs/vuepress/" class="nav-link">
  vuepress
</a></li><li class="dropdown-subitem"><a href="/blog-leaf/blogs/others/" class="nav-link router-link-active">
  others
</a></li></ul></li><li class="dropdown-item"><h4>
          Guide
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-leaf/guide/" class="nav-link">
  introduce
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact Menu" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact Menu" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/github-yeah/blog-leaf" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog-leaf/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Category" class="dropdown-title"><span class="title">Category</span> <span class="arrow down"></span></button> <button type="button" aria-label="Category" class="mobile-dropdown-title"><span class="title">Category</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Archives
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-leaf/blogs/vue/" class="nav-link">
  vue
</a></li><li class="dropdown-subitem"><a href="/blog-leaf/blogs/vuepress/" class="nav-link">
  vuepress
</a></li><li class="dropdown-subitem"><a href="/blog-leaf/blogs/others/" class="nav-link router-link-active">
  others
</a></li></ul></li><li class="dropdown-item"><h4>
          Guide
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/blog-leaf/guide/" class="nav-link">
  introduce
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Contact Menu" class="dropdown-title"><span class="title">Contact</span> <span class="arrow down"></span></button> <button type="button" aria-label="Contact Menu" class="mobile-dropdown-title"><span class="title">Contact</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.vuepress.cn/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  VuePress
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/github-yeah/blog-leaf" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>éšç¬”</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-leaf/blogs/others/" aria-current="page" class="sidebar-link">ğŸ‚ ä»‹ç»</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TypeScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-leaf/blogs/others/ts/" class="sidebar-link">TypeScripté¡¹ç›®é…ç½®</a></li><li><a href="/blog-leaf/blogs/others/ts/package-json.html" class="sidebar-link">é…ç½®package.json</a></li><li><a href="/blog-leaf/blogs/others/ts/tsconfig-json.html" class="sidebar-link">é…ç½®tsconfig.json</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Advanced</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-leaf/blogs/others/advanced/" aria-current="page" class="sidebar-link">è¿›é˜¶</a></li><li><a href="/blog-leaf/blogs/others/advanced/gulp.html" class="sidebar-link">é›†æˆGulp</a></li><li><a href="/blog-leaf/blogs/others/advanced/webpack.html" class="sidebar-link">Webpack</a></li><li><a href="/blog-leaf/blogs/others/advanced/cli.html" aria-current="page" class="active sidebar-link">CLIä»å…¥é—¨åˆ°å¼€è½¦</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#æ¦‚è¿°" class="sidebar-link">æ¦‚è¿°</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#å¼€å§‹ä¹‹å‰" class="sidebar-link">å¼€å§‹ä¹‹å‰</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#æ­å»º-typescript-é¡¹ç›®" class="sidebar-link">æ­å»º TypeScript é¡¹ç›®</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#é¡¹ç›®åˆå§‹åŒ–" class="sidebar-link">é¡¹ç›®åˆå§‹åŒ–</a></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#å®‰è£…é¡¹ç›®å¼€å‘ä¾èµ–" class="sidebar-link">å®‰è£…é¡¹ç›®å¼€å‘ä¾èµ–</a></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#é…ç½®-tsconfig-json" class="sidebar-link">é…ç½® tsconfig.json</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#é…ç½®å¯æ‰§è¡Œå‘½ä»¤" class="sidebar-link">é…ç½®å¯æ‰§è¡Œå‘½ä»¤</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#ç›®å½•æ­å»º-å‚è€ƒnest-cli" class="sidebar-link">ç›®å½•æ­å»ºï¼ˆå‚è€ƒnest-cliï¼‰</a></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#å®ç°-version-å’Œ-help" class="sidebar-link">å®ç° --version å’Œ --help</a></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#å®ç°-info" class="sidebar-link">å®ç° --info</a></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#å®ç°æŒ‡ä»¤çš„æ™ºèƒ½æ¨æ–­" class="sidebar-link">å®ç°æŒ‡ä»¤çš„æ™ºèƒ½æ¨æ–­</a></li><li class="sidebar-sub-header"><a href="/blog-leaf/blogs/others/advanced/cli.html#å¸¸ç”¨ä¾èµ–åº“" class="sidebar-link">å¸¸ç”¨ä¾èµ–åº“</a></li></ul></li></ul></li><li><a href="/blog-leaf/blogs/others/advanced/compile.html" class="sidebar-link">TypeScriptç¼–è¯‘ç¼–è¯‘è¿‡ç¨‹</a></li><li><a href="/blog-leaf/blogs/others/advanced/child-process.html" class="sidebar-link">child-process</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="header-anchor">#</a> æ¦‚è¿°</h2> <p><code>CLI</code> ç›´è¯‘å°±æ˜¯å‘½ä»¤è¡Œç•Œé¢ï¼šé€šè¿‡ç»ˆç«¯å‘½ä»¤è¿›è¡Œäººæœºäº¤äº’ã€‚
é€šè¿‡ä¸€äº›ç®€å•çš„å‘½ä»¤æ¥è¿›è¡Œå¤§é‡çç¢ä¸”é‡å¤æ€§é«˜çš„å·¥ä½œï¼ˆé…ç½®ç¯å¢ƒã€é›†æˆå·¥å…·ï¼Œæ‰“åŒ…ï¼Œå‘å¸ƒç­‰ï¼‰ï¼Œ
ä»è€Œè®©æˆ‘ä»¬æœ‰æ›´å¤šçš„ç²¾åŠ›ä¸“æ³¨äºä¸šåŠ¡ã€‚</p> <h3 id="å¼€å§‹ä¹‹å‰"><a href="#å¼€å§‹ä¹‹å‰" class="header-anchor">#</a> å¼€å§‹ä¹‹å‰</h3> <ul><li>æˆ‘ä»¬å°†ä½¿ç”¨<code>TypeScript</code>è¿›è¡Œä¸šåŠ¡é€»è¾‘çš„ç¼–å†™</li> <li>å†…å®¹é€‚ç”¨äºå¯¹<code>cli</code>ä¸å¤ªäº†è§£çš„å°ç™½</li></ul> <h2 id="æ­å»º-typescript-é¡¹ç›®"><a href="#æ­å»º-typescript-é¡¹ç›®" class="header-anchor">#</a> æ­å»º <code>TypeScript</code> é¡¹ç›®</h2> <h3 id="é¡¹ç›®åˆå§‹åŒ–"><a href="#é¡¹ç›®åˆå§‹åŒ–" class="header-anchor">#</a> é¡¹ç›®åˆå§‹åŒ–</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ ¹æ®æç¤ºè®¾ç½®ä¸€ä¸‹é¡¹ç›®</p> <h3 id="å®‰è£…é¡¹ç›®å¼€å‘ä¾èµ–"><a href="#å®‰è£…é¡¹ç›®å¼€å‘ä¾èµ–" class="header-anchor">#</a> å®‰è£…é¡¹ç›®å¼€å‘ä¾èµ–</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> --save-dev typescript ts-node
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>å®‰è£…<code>typescript</code>æœ¬åœ°ä¾èµ–åï¼Œå¯ä»¥ä½¿ç”¨ <code>tsc</code> è½¬è¯‘å‘½ä»¤ã€‚</p> <h3 id="é…ç½®-tsconfig-json"><a href="#é…ç½®-tsconfig-json" class="header-anchor">#</a> é…ç½® <code>tsconfig.json</code></h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>tsc --init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æŒ‰éœ€é…ç½® <code>tsconfig.json</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ES6&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;lib&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;ESNext&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;commonjs&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;declaration&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sourceMap&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;skipLibCheck&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token property">&quot;outDir&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;resolveJsonModule&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;lib/manager/templete/templete.json&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;bin&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;lib&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;actions&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;commands&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exclude&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;node_modules&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;dist&quot;</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="é…ç½®å¯æ‰§è¡Œå‘½ä»¤"><a href="#é…ç½®å¯æ‰§è¡Œå‘½ä»¤" class="header-anchor">#</a> é…ç½®å¯æ‰§è¡Œå‘½ä»¤</h2> <ol><li><p>åˆ›å»º<code>leaf.ts</code>ä½œä¸ºå‘½ä»¤çš„å¯æ‰§è¡Œå…¥å£æ–‡ä»¶</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code> #<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node

 <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ä»0å¼€å§‹CLI&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>å¼€å¤´çš„<code>#!/usr/bin/env node</code>ä¸èƒ½å°‘ï¼Œè¿™æŒ‡å®šäº†nodeç¯å¢ƒçš„è·¯å¾„</p></div></li> <li><p>åœ¨<code>package.json</code>ä¸­é€šè¿‡<code>bin</code>é…ç½®å‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶åœ°å€</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// package.json</span>
<span class="token punctuation">{</span>
    <span class="token string">&quot;bin&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token comment">// `dist` æ˜¯`tsconfig.json`ç¼–è¯‘é€‰é¡¹çš„`outDir`ï¼Œå¯æ ¹æ®è‡ªå·±é…ç½®ä¿®æ”¹</span>
        <span class="token string">&quot;leaf&quot;</span><span class="token operator">:</span> <span class="token string">&quot;dist/bin/leaf.js&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>æ‰§è¡Œ<code>tsc</code>å‘½ä»¤ï¼Œç¼–è¯‘<code>leaf.ts</code>ç”Ÿæˆ<code>leaf.js</code></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>å¯ä»¥é€šè¿‡è¿è¡Œ<code>tsc -w</code>ï¼Œç›‘å¬è‡ªåŠ¨ç¼–è¯‘<code>leaf.ts</code></p></div></li> <li><p>åœ¨<code>CLI</code>é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ<code>npm link</code>ï¼ŒæŠŠ<code>bin</code>ä¸­é…ç½®çš„å‘½ä»¤æŒ‚è½½åˆ°å…¨å±€æ¥è¿›è¡Œæœ¬åœ°æµ‹è¯•</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># &lt;project root dir&gt; </span>
<span class="token function">npm</span> <span class="token function">link</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">è§£é™¤æŒ‡ä»¤</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># &lt;project root dir&gt; </span>
<span class="token function">npm</span> unlink
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div></li> <li><p>æ‰§è¡Œè‡ªå®šä¹‰çš„å‘½ä»¤</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>leaf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>æ§åˆ¶å°å°†è¾“å‡ºï¼š<code>ä»0å¼€å§‹CLI&quot;</code></p></div></li></ol> <h3 id="ç›®å½•æ­å»º-å‚è€ƒnest-cli"><a href="#ç›®å½•æ­å»º-å‚è€ƒnest-cli" class="header-anchor">#</a> ç›®å½•æ­å»ºï¼ˆå‚è€ƒ<code>nest-cli</code>ï¼‰</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">.</span>
â”œâ”€â”€ bin <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>å‘½ä»¤å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ actions <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>æ‰§è¡Œå‘½ä»¤é€»è¾‘ç›®å½•<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ commands <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>é…ç½®å‘½ä»¤å¹¶è§£æå‘½ä»¤ç›®å½•<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ bin <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ lib <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>ä¸šåŠ¡é€»è¾‘ç›®å½•<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ dist <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span> ç¼–è¯‘åçš„æ–‡ä»¶è¾“å‡ºç›®å½•<span class="token operator">**</span><span class="token punctuation">)</span>_
â”‚   â”œâ”€â”€ leaf<span class="token punctuation">.</span>ts <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>leafå‘½ä»¤å¯¹åº”çš„å¯æ‰§è¡Œæ–‡ä»¶<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ node_modules  <span class="token function">_</span><span class="token punctuation">(</span><span class="token operator">**</span>å®‰è£…çš„åŒ…<span class="token operator">**</span><span class="token punctuation">)</span>_
â”œâ”€â”€ <span class="token keyword">package</span><span class="token punctuation">.</span>json
â””â”€â”€ tsconfig<span class="token punctuation">.</span>json
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„å…¨å±€å‘½ä»¤ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•</p> <p>æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æç‚¹èŠ±é‡Œèƒ¡å“¨çš„ä¸œè¥¿</p> <h3 id="å®ç°-version-å’Œ-help"><a href="#å®ç°-version-å’Œ-help" class="header-anchor">#</a> å®ç° <code>--version</code> å’Œ <code>--help</code></h3> <p>æˆ‘ä»¬ä½¿ç”¨ <a href="https://www.npmjs.com/package/commander" target="_blank" rel="noopener noreferrer">commander<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆå‘½ä»¤å·¥å…·ï¼‰æ¥ç¼–å†™å’Œå¤„ç†æŒ‡ä»¤</p> <p>å®‰è£…<code>commander</code>ä¾èµ–</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> commander --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ä¿®æ”¹<code>bin/leaf.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span>  program <span class="token keyword">from</span> <span class="token string">&quot;commander&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// è¯»å–package.json</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> pkg <span class="token keyword">from</span> <span class="token string">&quot;../package.json&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">bootsctrap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½® `--version` å’Œ `--help` æŒ‡ä»¤</span>
    program
        <span class="token comment">// è¯»å– `package.json`ä¸­çš„`version`</span>
        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token string">'-v, --version'</span><span class="token punctuation">,</span> <span class="token string">'CLIå½“å‰ç‰ˆæœ¬.'</span><span class="token punctuation">)</span>
        <span class="token comment">// æ‰§è¡Œæ ¼å¼</span>
        <span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token string">'&lt;command&gt; [options]'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">helpOption</span><span class="token punctuation">(</span><span class="token string">'-h, --help'</span><span class="token punctuation">,</span> <span class="token string">'å¸®åŠ©.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å…¶ä»–å‘½ä»¤ä¸€å®šè¦åœ¨ `program.parse`ä¹‹å‰ç¼–å†™ï¼Œå¦åˆ™æ— æ•ˆ</span>

    <span class="token comment">// è§£æç»ˆç«¯æŒ‡ä»¤</span>
    program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å‘½ä»¤</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> cmd<span class="token punctuation">]</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">;</span>

    <span class="token comment">// è¾“å‡ºå¸®åŠ©ï¼ˆå®¹é”™ï¼‰</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        program<span class="token punctuation">.</span><span class="token function">outputHelp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">bootsctrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>commander</code>ä¸­çš„æŒ‡ä»¤ ç”¨<code>&lt;&gt;</code>åŒ…è£¹çš„è¡¨ç¤ºå¿…å¡«ï¼Œä½¿ç”¨<code>[]</code>åŒ…è£¹çš„è¡¨ç¤ºé€‰å¡«</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// æ‰§è¡Œ createå‘½ä»¤ nameå‚æ•°ä¸ºå¿…é€‰ï¼Œä¸è®¾ç½®å°†ä¼šæŠ¥é”™</span>
program<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'create &lt;name&gt;'</span><span class="token punctuation">)</span>
<span class="token comment">// æ‰§è¡Œ createå‘½ä»¤ nameå‚æ•°ä¸ºå¯é€‰</span>
program<span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">'create [name]'</span><span class="token punctuation">)</span>   
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div> <p>æ‰§è¡Œ <code>--version</code> å’Œ <code>--help</code> ï¼ˆä¸€å®šè¦ç¡®å®š <code>npm link</code> æ‰§è¡Œè¿‡ï¼‰</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>leaf -v
leaf --version
leaf -h
leaf --h
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>è¿™æ ·æˆ‘ä»¬çš„ <code>--version</code> å’Œ <code>--help</code>æŒ‡ä»¤å°±å®Œæˆäº†</p> <h3 id="å®ç°-info"><a href="#å®ç°-info" class="header-anchor">#</a> å®ç° <code>--info</code></h3> <p>è®©æˆ‘ä»¬å®ç°ä¸€ä¸ª<code>--info</code>æŒ‡ä»¤ï¼Œç”¨æ¥å±•ç¤ºæ›´è¯¦ç»†çš„<code>cli</code>ä¿¡æ¯</p> <p>åŸºç¡€å»ºè®¾ï¼š</p> <ol><li><p>æ–°å»ºä¸€ä¸ª<code>commands/command.ts</code>ç”¨æ¥æè¿°æ¯ä¸€ä¸ªcommandçš„ç±»å‹</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> commander <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;commander&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Command</span> <span class="token operator">=</span> <span class="token punctuation">(</span>program<span class="token operator">:</span> commander<span class="token punctuation">.</span>CommanderStatic<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>æ–°å»º<code>actions/action.ts</code>ç”¨æ¥æè¿°æ¯ä¸€ä¸ªactionç±»å‹</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Input</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    value<span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token operator">|</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Action</span> <span class="token operator">=</span> <span class="token punctuation">(</span>inputs<span class="token operator">?</span><span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <p>è®©æˆ‘ä»¬æŒ‰ç…§è¿™ä¸ªæµç¨‹æ¥å®ç°è‡ªå·±çš„<code>--info</code></p> <p>å®‰è£…<a href="https://www.npmjs.com/package/chalk" target="_blank" rel="noopener noreferrer">chalk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆæ§åˆ¶å°è¾“å‡ºå†…å®¹æ ·å¼ï¼‰ä¾èµ–</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> chalk --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>åˆ›å»º<code>commands/info.ts</code>æ¥ç¼–è¾‘æŒ‡ä»¤</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../actions/action&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Command <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./command&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»º Info Command</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token keyword">of</span> <span class="token operator">=</span> <span class="token punctuation">(</span>action<span class="token operator">:</span> Action<span class="token punctuation">)</span><span class="token operator">:</span> Command <span class="token operator">=&gt;</span> program <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    program
        <span class="token comment">// ç¼–è¾‘æŒ‡ä»¤ leaf info</span>
        <span class="token punctuation">.</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token string">&quot;info&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">// è®¾ç½®æŒ‡ä»¤ç®€å†™ leaf i</span>
        <span class="token punctuation">.</span><span class="token function">alias</span><span class="token punctuation">(</span><span class="token string">&quot;i&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">// æŒ‡ä»¤æè¿°ï¼Œæ‰§è¡Œï¼šleaf info --help å±•ç¤ºæ­¤ä¿¡æ¯</span>
        <span class="token punctuation">.</span><span class="token function">description</span><span class="token punctuation">(</span><span class="token string">&quot;æ˜¾ç¤ºCLIè¯¦æƒ….&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ‰§è¡Œå…·ä½“ä¸šåŠ¡é€»è¾‘ï¼ˆå› ä¸ºinfoæŒ‡ä»¤ä¸éœ€è¦å‚æ•°ï¼Œå› æ­¤ä¸åšå‚æ•°å¤„ç†ï¼‰</span>
            <span class="token keyword">await</span> <span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>åˆ›å»º<code>actions/info.ts</code>æ¥å¤„ç†æŒ‡ä»¤é€»è¾‘</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> green<span class="token punctuation">,</span> blue<span class="token punctuation">,</span> red <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;chalk&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> os <span class="token keyword">from</span> <span class="token string">&quot;os&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Action <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./action&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// package.json</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> pkg <span class="token keyword">from</span> <span class="token string">&quot;../package.json&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// å±•ç¤ºç³»ç»Ÿä¿¡æ¯</span>
<span class="token keyword">const</span> <span class="token function-variable function">displaySysInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'[ç³»ç»Ÿä¿¡æ¯]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ç³»ç»Ÿç‰ˆæœ¬ï¼š</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">blue</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span><span class="token function">platform</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'NodeJS ç‰ˆæœ¬ :'</span><span class="token punctuation">,</span> <span class="token function">blue</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// å±•ç¤º cli ä¿¡æ¯</span>
<span class="token keyword">const</span> <span class="token function-variable function">displayPackageInfo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'[LEAF CLI]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'LEAF CLI Version: '</span><span class="token punctuation">,</span> <span class="token function">blue</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>version<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token function">green</span><span class="token punctuation">(</span><span class="token string">'[ä¾èµ–æ¨¡å—]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> dependencies <span class="token operator">=</span> pkg<span class="token punctuation">.</span>dependencies<span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> dependency <span class="token keyword">in</span> dependencies<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> key <span class="token operator">=</span> dependency <span class="token keyword">as</span> <span class="token keyword">keyof</span> <span class="token keyword">typeof</span> dependencies<span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token function">blue</span><span class="token punctuation">(</span>dependencies<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Info Action</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> action<span class="token operator">:</span> <span class="token function-variable function">Action</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">displayBanner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">displaySysInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">displayPackageInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>æŒ‚è½½æŒ‡ä»¤ï¼š
ä¿®æ”¹<code>bin/leaf.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span>  program <span class="token keyword">from</span> <span class="token string">&quot;commander&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> action <span class="token keyword">as</span> infoAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../actions/info&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span> <span class="token keyword">as</span> infoCmdOf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../commands/info&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// è¯»å–package.json</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> pkg <span class="token keyword">from</span> <span class="token string">&quot;../package.json&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">bootsctrap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½® `--version` å’Œ `--help` æŒ‡ä»¤</span>
    program
        <span class="token comment">// è¯»å– `package.json`ä¸­çš„`version`</span>
        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token string">'-v, --version'</span><span class="token punctuation">,</span> <span class="token string">'CLIå½“å‰ç‰ˆæœ¬.'</span><span class="token punctuation">)</span>
        <span class="token comment">// æ‰§è¡Œæ ¼å¼</span>
        <span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token string">'&lt;command&gt; [options]'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">helpOption</span><span class="token punctuation">(</span><span class="token string">'-h, --help'</span><span class="token punctuation">,</span> <span class="token string">'å¸®åŠ©.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å…¶ä»–å‘½ä»¤ä¸€å®šè¦åœ¨ `program.parse`ä¹‹å‰ç¼–å†™ï¼Œå¦åˆ™æ— æ•ˆ</span>
    <span class="token comment">// åŠ è½½infoæŒ‡ä»¤</span>
    <span class="token function">infoCmdOf</span><span class="token punctuation">(</span>infoAction<span class="token punctuation">)</span><span class="token punctuation">(</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è§£æç»ˆç«¯æŒ‡ä»¤</span>
    program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å‘½ä»¤</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> cmd<span class="token punctuation">]</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">;</span>

    <span class="token comment">// è¾“å‡ºå¸®åŠ©ï¼ˆå®¹é”™ï¼‰</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        program<span class="token punctuation">.</span><span class="token function">outputHelp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">bootsctrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br></div></div><p>æ‰§è¡Œ<code>--info</code>å‘½ä»¤</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>leaf i
leaf info
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¾“å‡ºç»“æœï¼ˆå®é™…ä¼šæœ‰é¢œè‰²å˜åŒ–ï¼Œæ­¤å¤„å¿½ç•¥ï¼‰ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>ç³»ç»Ÿä¿¡æ¯<span class="token punctuation">]</span>
ç³»ç»Ÿç‰ˆæœ¬ï¼šwin32 <span class="token number">10.0</span>.14393
NodeJS ç‰ˆæœ¬ <span class="token builtin class-name">:</span> v12.13.1
<span class="token punctuation">[</span>LEAF CLI<span class="token punctuation">]</span>
LEAF CLI Version:  <span class="token number">0.0</span>.1
<span class="token punctuation">[</span>ä¾èµ–æ¨¡å—<span class="token punctuation">]</span>
chalk ^4.1.0
commander ^7.1.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†<code>--info</code>å‘½ä»¤</p> <h3 id="å®ç°æŒ‡ä»¤çš„æ™ºèƒ½æ¨æ–­"><a href="#å®ç°æŒ‡ä»¤çš„æ™ºèƒ½æ¨æ–­" class="header-anchor">#</a> å®ç°æŒ‡ä»¤çš„æ™ºèƒ½æ¨æ–­</h3> <p>ç›®çš„ï¼šæ‰‹åŠ¨è¾“å…¥äº†é”™è¯¯çš„æŒ‡ä»¤æ—¶ï¼Œæé«˜ç”¨æˆ·ä½“éªŒï¼Œç»™å‡ºæ™ºèƒ½æ¨æ–­çš„æŒ‡ä»¤</p> <p>å®‰è£…<code>leven</code>ä¾èµ–ï¼Œç”¨æ¥æµ‹é‡å­—ç¬¦ä¸²å·®å¼‚</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> leven --save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>æ–°å»º<code>commands/suggest.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Action<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../actions/action&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Command <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./command&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// åˆ›å»º Suggest Command</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token keyword">of</span> <span class="token operator">=</span> <span class="token punctuation">(</span>action<span class="token operator">:</span> Action<span class="token punctuation">)</span><span class="token operator">:</span> Command <span class="token operator">=&gt;</span> program <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    program
        <span class="token punctuation">.</span><span class="token function">arguments</span><span class="token punctuation">(</span><span class="token string">'[command]'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token keyword">async</span> inputCmd <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>inputCmd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">const</span> inputs<span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            inputs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                name<span class="token operator">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
                value<span class="token operator">:</span> inputCmd
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> options<span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> program<span class="token punctuation">.</span>commands<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>cmd <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
                name<span class="token operator">:</span> cmd<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                value<span class="token operator">:</span> cmd<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">await</span> <span class="token function">action</span><span class="token punctuation">(</span>inputs<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>æ–°å»º<code>actions/suggest.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> red<span class="token punctuation">,</span> yellow <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;chalk&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> leven <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">&quot;leven&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Action<span class="token punctuation">,</span> Input <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;./action&quot;</span><span class="token punctuation">;</span>


<span class="token comment">// Suggest Action</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> action<span class="token operator">:</span> <span class="token function-variable function">Action</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>inputs<span class="token operator">?</span><span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> options<span class="token operator">?</span><span class="token operator">:</span> Input<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> inputCmd <span class="token operator">=</span> inputs<span class="token operator">?.</span><span class="token function">find</span><span class="token punctuation">(</span>value <span class="token operator">=&gt;</span> value<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'name'</span><span class="token punctuation">)</span><span class="token operator">?.</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> suggestion <span class="token operator">=</span> options<span class="token operator">?.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span>betterMatchable<span class="token punctuation">,</span> availableCmd<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> isBetterMatch <span class="token operator">=</span> <span class="token function">leven</span><span class="token punctuation">(</span>availableCmd<span class="token punctuation">.</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">,</span> inputCmd<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token function">leven</span><span class="token punctuation">(</span>betterMatchable<span class="token punctuation">,</span> inputCmd<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>isBetterMatch <span class="token operator">&amp;&amp;</span> <span class="token function">leven</span><span class="token punctuation">(</span>availableCmd<span class="token punctuation">.</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">,</span> inputCmd<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> availableCmd<span class="token punctuation">.</span>value <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> betterMatchable
        <span class="token punctuation">}</span>
        <span class="token punctuation">,</span> <span class="token string">''</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>suggestion<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">red</span><span class="token punctuation">(</span><span class="token string">'ä½ æ˜¯å¦æƒ³è¾“å…¥:'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">yellow</span><span class="token punctuation">(</span>suggestion<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>æŒ‚è½½<code>suggest</code>å‘½ä»¤</p> <p>ç¼–è¾‘<code>bin/leaf.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>#<span class="token operator">!</span><span class="token operator">/</span>usr<span class="token operator">/</span>bin<span class="token operator">/</span>env node
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span>  program <span class="token keyword">from</span> <span class="token string">&quot;commander&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> action <span class="token keyword">as</span> infoAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../actions/info&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span> <span class="token keyword">as</span> infoCmdOf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../commands/info&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> action <span class="token keyword">as</span> suggestAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../actions/suggest&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">of</span> <span class="token keyword">as</span> suggestCmdOf <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../commands/suggest&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// è¯»å–package.json</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> pkg <span class="token keyword">from</span> <span class="token string">&quot;../package.json&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">bootsctrap</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// è®¾ç½® `--version` å’Œ `--help` æŒ‡ä»¤</span>
    program
        <span class="token comment">// è¯»å– `package.json`ä¸­çš„`version`</span>
        <span class="token punctuation">.</span><span class="token function">version</span><span class="token punctuation">(</span>pkg<span class="token punctuation">.</span>version<span class="token punctuation">,</span> <span class="token string">'-v, --version'</span><span class="token punctuation">,</span> <span class="token string">'CLIå½“å‰ç‰ˆæœ¬.'</span><span class="token punctuation">)</span>
        <span class="token comment">// æ‰§è¡Œæ ¼å¼</span>
        <span class="token punctuation">.</span><span class="token function">usage</span><span class="token punctuation">(</span><span class="token string">'&lt;command&gt; [options]'</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">helpOption</span><span class="token punctuation">(</span><span class="token string">'-h, --help'</span><span class="token punctuation">,</span> <span class="token string">'å¸®åŠ©.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å…¶ä»–å‘½ä»¤ä¸€å®šè¦åœ¨ `program.parse`ä¹‹å‰ç¼–å†™ï¼Œå¦åˆ™æ— æ•ˆ</span>
    <span class="token comment">// åŠ è½½suggestæŒ‡ä»¤</span>
    <span class="token function">suggestCmdOf</span><span class="token punctuation">(</span>suggestAction<span class="token punctuation">)</span><span class="token punctuation">(</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// åŠ è½½infoæŒ‡ä»¤</span>
    <span class="token function">infoCmdOf</span><span class="token punctuation">(</span>infoAction<span class="token punctuation">)</span><span class="token punctuation">(</span>program<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// è§£æç»ˆç«¯æŒ‡ä»¤</span>
    program<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>argv<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// å‘½ä»¤</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token punctuation">,</span> cmd<span class="token punctuation">]</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>argv<span class="token punctuation">;</span>

    <span class="token comment">// è¾“å‡ºå¸®åŠ©ï¼ˆå®¹é”™ï¼‰</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>cmd <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        program<span class="token punctuation">.</span><span class="token function">outputHelp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">bootsctrap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><p>æ‰§è¡Œå‘½ä»¤:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># é”™è¯¯çš„æŒ‡ä»¤</span>
leaf inf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>è¾“å‡ºï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ä½ æ˜¯å¦æƒ³è¾“å…¥: info?
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="å¸¸ç”¨ä¾èµ–åº“"><a href="#å¸¸ç”¨ä¾èµ–åº“" class="header-anchor">#</a> å¸¸ç”¨ä¾èµ–åº“</h3> <ul><li><a href="https://www.npmjs.com/package/commander" target="_blank" rel="noopener noreferrer">commander<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆå‘½ä»¤å·¥å…·ï¼‰</li> <li><a href="https://www.npmjs.com/package/download" target="_blank" rel="noopener noreferrer">download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆæ–‡ä»¶ä¸‹è½½ï¼‰</li> <li><a href="https://www.npmjs.com/package/fs-extra" target="_blank" rel="noopener noreferrer">fs-extra<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆæœ¬åœ°æ–‡ä»¶æ“ä½œï¼‰</li> <li><a href="https://www.npmjs.com/package/inquirer" target="_blank" rel="noopener noreferrer">inquirer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆå‘½ä»¤è¡Œäº¤äº’ï¼‰</li> <li><a href="https://www.npmjs.com/package/update-notifier" target="_blank" rel="noopener noreferrer">update-notifier<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆpmåœ¨çº¿æ£€æŸ¥æ›´æ–°ï¼‰</li> <li><a href="https://www.npmjs.com/package/chalk" target="_blank" rel="noopener noreferrer">chalk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆæ§åˆ¶å°è¾“å‡ºå†…å®¹æ ·å¼ï¼‰</li> <li><a href="https://www.npmjs.com/package/log-symbols" target="_blank" rel="noopener noreferrer">log-symbols<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆæ—¥å¿—ç¾åŒ–ï¼‰</li> <li><a href="https://www.npmjs.com/package/ora" target="_blank" rel="noopener noreferrer">ora<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ï¼ˆSpinnerç­‰å¾…åŠ¨ç”»ï¼‰</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">æœ€åæ›´æ–°:</span> <span class="time">3/11/2021, 6:54:02 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog-leaf/blogs/others/advanced/webpack.html" class="prev">
        Webpack
      </a></span> <span class="next"><a href="/blog-leaf/blogs/others/advanced/compile.html">
        TypeScriptç¼–è¯‘ç¼–è¯‘è¿‡ç¨‹
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog-leaf/assets/js/app.ee4ca5d1.js" defer></script><script src="/blog-leaf/assets/js/2.470386f0.js" defer></script><script src="/blog-leaf/assets/js/17.8ac44ecc.js" defer></script>
  </body>
</html>
